<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GAI Use Declaration Generator â€” Custom</title>
  <!--
    MIT License (c) 2025 Caroline Brinkert & Contributors
    Permission is hereby granted, free of charge, to any person obtaining a copy
    of this software and associated documentation files (the "Software"), to deal
    in the Software without restriction, including without limitation the rights
    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to do so, subject to the following conditions:
    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
  -->
  <style>
    :root{
      --bg:#ffffff; --fg:#111; --muted:#666; --line:#e5e7eb; --accent:#111; --accent-fg:#fff; --radius:14px;
    }
    *{box-sizing:border-box}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--fg);margin:0}
    header{max-width:980px;margin:32px auto 12px;padding:0 16px}
    main{max-width:980px;margin:0 auto 64px;padding:0 16px}
    h1{font-size:clamp(1.35rem,1.5rem + 1vw,2rem);margin:.2rem 0 .5rem}
    p.lead{color:var(--muted);margin:.2rem 0 1rem}
    .panel{border:1px solid var(--line);border-radius:var(--radius);padding:16px;margin:14px 0}
    .grid{display:grid;gap:14px}
    .cols{display:grid;gap:8px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
    fieldset{border:1px dashed var(--line);border-radius:var(--radius);padding:12px}
    legend{padding:0 6px;color:#333;font-weight:600}
    label{display:block}
    input[type="text"],textarea,select{width:100%;padding:10px;border:1px solid var(--line);border-radius:12px;font:inherit}
    textarea{min-height:160px}
    .row{display:flex;align-items:center;gap:.55rem}
    .muted{color:var(--muted)}
    details summary{cursor:pointer;user-select:none}
    button{border:1px solid var(--accent);background:var(--accent);color:var(--accent-fg);padding:.7rem 1rem;border-radius:12px;font-weight:600;cursor:pointer}
    button.ghost{background:transparent;color:var(--accent);}
    .stack{display:flex;flex-wrap:wrap;gap:8px}
    .toolbar{display:flex;gap:8px;flex-wrap:wrap}
    .out{background:#fafafa}
    .chip{display:inline-flex;align-items:center;gap:.35rem;border:1px solid var(--line);padding:.25rem .6rem;border-radius:999px;font-size:.85rem}
    .kbd{font:inherit;border:1px solid var(--line);background:#f3f4f6;padding:.1rem .35rem;border-radius:6px}
    .footer{color:var(--muted);font-size:.9rem;margin-top:6px}
  </style>
</head>
<body>
  <header>
    <h1>GAI Use Declaration Generator â€” Custom</h1>
    <p class="lead">Standalone, no build tools. Paste this file into CodeX/VSÂ Code/GitHub Pages and personalize the tasks, wording, or styles.</p>
  </header>

  <main>
    <section class="panel grid">
      <div class="grid" role="region" aria-labelledby="who">
        <label for="who"><strong>1) Responsible person or group</strong></label>
        <input id="who" type="text" placeholder="e.g., Caroline Brinkert; or â€˜Collective responsibilityâ€™" />
      </div>

      <div class="grid" role="region" aria-labelledby="when">
        <label for="when"><strong>2) Date (ISO)</strong></label>
        <input id="when" type="text" placeholder="YYYY-MM-DD (auto-fills today)" />
      </div>

      <div class="grid" role="region" aria-labelledby="model">
        <label for="model"><strong>3) Model(s) used</strong></label>
        <input id="model" type="text" placeholder="e.g., GPTâ€‘5 Thinking (OpenAI), Claude 3.7, Gemini 2.0; include version/date" />
      </div>

      <div class="grid" role="region" aria-label="scope">
        <label for="scope"><strong>4) Context (course / project / clinic)</strong></label>
        <input id="scope" type="text" placeholder="e.g., SH732 Stuttering & Related Disorders â€” counseling microâ€‘skills unit" />
      </div>

      <fieldset>
        <legend>5) Delegated tasks (edit this taxonomy below)</legend>
        <div id="taxonomy"></div>
        <p class="footer">Tip: Filter quickly with <span class="kbd">Ctrl/âŒ˜</span>+<span class="kbd">F</span>. You can also pass URL params like <code>?check=Writing%20%26%20Editing:Proofreading%20and%20editing</code>.</p>
      </fieldset>

      <div class="grid" role="region" aria-labelledby="notes">
        <label for="notes"><strong>6) Additional notes</strong> <span class="muted">(ethics, FERPA/PHI, verification, citations, prompt provenance)</span></label>
        <textarea id="notes" placeholder="e.g., Prompts reviewed by faculty; no PHI entered; outputs verified for factual accuracy and bias; citations checked."></textarea>
      </div>

      <div class="toolbar">
        <button id="btnGen" type="button">Generate declaration</button>
        <button id="btnCopy" class="ghost" type="button" title="Copy to clipboard">Copy</button>
        <button id="btnMD" class="ghost" type="button" title="Download Markdown">Download .md</button>
        <button id="btnReset" class="ghost" type="button" title="Clear selections">Reset</button>
      </div>

      <div class="grid">
        <label for="out"><strong>Generated declaration</strong></label>
        <textarea id="out" class="out" readonly placeholder="Your declaration will appear hereâ€¦"></textarea>
      </div>

      <p class="footer">Customization pointers: Edit the <code>GAI_TAXONOMY</code> object, tweak the <code>template()</code) function, and adjust styles above. No external libraries.</p>
    </section>

    <section class="panel">
      <details>
        <summary><strong>ðŸ”§ Configure task taxonomy (click to view/edit code)</strong></summary>
        <p class="muted">This JSON drives the checkbox UI. Rename headings, add/remove items, or add SLPâ€‘specific sections.</p>
        <pre id="schema" style="white-space:pre-wrap;background:#f8fafc;border:1px solid var(--line);padding:12px;border-radius:12px;max-height:280px;overflow:auto"></pre>
      </details>
    </section>

    <section class="panel">
      <details>
        <summary><strong>ðŸ“„ Sample policy text (optional)</strong></summary>
        <p class="muted">Drop-in snippet you can paste under Acknowledgments/Methods/CRediT.</p>
        <div class="stack">
          <span class="chip">Accuracy review</span>
          <span class="chip">Bias & ethics</span>
          <span class="chip">Attribution</span>
          <span class="chip">Versioning</span>
        </div>
        <p>
        <em>Policy:</em> Generative AI may support defined tasks (e.g., idea generation, editing, figure drafting) when used transparently and responsibly. All AI-assisted content must be reviewed by the author(s) for accuracy, original meaning, confidentiality, and bias. No PHI/FERPA-protected information may be entered into AI systems without prior authorization. Model name, provider, and date/version must be recorded in the declaration.
        </p>
      </details>
    </section>

  </main>

  <script>
    // --- Taxonomy (edit to personalize) ---------------------------------------
    const GAI_TAXONOMY = {
      "Conceptualization": [
        "Idea generation",
        "Defining objectives",
        "Background literature scoping",
        "Preliminary hypothesis exploration"
      ],
      "Writing & Editing": [
        "Text generation",
        "Proofreading and editing",
        "Summarizing text",
        "Plain-language rewrite"
      ],
      "Data & Visualization": [
        "Data cleaning",
        "Data analysis",
        "Visualization / figure drafting",
        "Table generation"
      ],
      "SLP / Counseling (examples)": [
        "Roleâ€‘play script drafting",
        "Feedback language drafting",
        "Rubric criteria wording",
        "Therapy materials brainstorming"
      ]
    };

    // --- Utilities ------------------------------------------------------------
    const $ = (q, el=document) => el.querySelector(q);
    const $$ = (q, el=document) => [...el.querySelectorAll(q)];
    const todayISO = () => new Date().toISOString().slice(0,10);

    function buildTaxonomy(container){
      container.innerHTML = '';
      Object.entries(GAI_TAXONOMY).forEach(([group, items]) => {
        const details = document.createElement('details');
        details.open = true;
        const summary = document.createElement('summary');
        summary.innerHTML = `<strong>${group}</strong>`;
        details.appendChild(summary);

        const cols = document.createElement('div');
        cols.className = 'cols';
        items.forEach(item => {
          const lbl = document.createElement('label');
          lbl.className = 'row';
          const cb = document.createElement('input');
          cb.type = 'checkbox';
          cb.name = 'task';
          cb.value = item;
          lbl.appendChild(cb);
          lbl.appendChild(document.createTextNode(' ' + item));
          cols.appendChild(lbl);
        });
        details.appendChild(cols);
        container.appendChild(details);
      });
    }

    function template({who, when, model, scope, tasks, notes}){
      const plural = /(collective|authors|team|group)/i.test(who) ? '' : 's';
      const tasksText = tasks.length ? tasks.join(', ') : 'no tasks';
      const lines = [
        `${who} disclose${plural} that generative AI was considered and may have been used in ${scope || 'this work'} on ${when}.`,
        tasks.length ? `Delegated tasks included: ${tasksText}.` : `No tasks were delegated to generative AI.`,
        model ? `Model(s): ${model}.` : null,
        `All outputs were reviewed for accuracy, meaning preservation, confidentiality, and bias mitigation prior to submission.`,
        notes ? `Notes: ${notes}` : null
      ].filter(Boolean);
      return lines.join(' ');
    }

    function generate(){
      const who = $('#who').value.trim() || 'The authors';
      const when = $('#when').value.trim() || todayISO();
      const model = $('#model').value.trim();
      const scope = $('#scope').value.trim();
      const tasks = $$('input[name="task"]:checked').map(i => i.value);
      const notes = $('#notes').value.trim();
      $('#out').value = template({who, when, model, scope, tasks, notes});
    }

    async function copyOut(){
      const txt = $('#out').value;
      if(!txt) return;
      await navigator.clipboard.writeText(txt);
      $('#btnCopy').textContent = 'Copied!';
      setTimeout(()=>$('#btnCopy').textContent='Copy', 1200);
    }

    function downloadMarkdown(){
      const body = $('#out').value || '# GAI Use Declaration\n\n(Generate first, then download.)';
      const md = `# GAI Use Declaration\n\n${body}\n`;
      const blob = new Blob([md], {type: 'text/markdown'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'gai-declaration.md';
      document.body.appendChild(a); a.click(); a.remove();
      setTimeout(()=>URL.revokeObjectURL(a.href), 1000);
    }

    function resetAll(){
      $('#who').value=''; $('#when').value=todayISO(); $('#model').value=''; $('#scope').value=''; $('#notes').value='';
      $$('input[name="task"]').forEach(cb=> cb.checked=false);
      $('#out').value='';
    }

    function applyURLChecks(){
      // Support query like ?check=Group:Item&check=Writing%20%26%20Editing:Proofreading%20and%20editing
      const params = new URLSearchParams(location.search);
      const checks = params.getAll('check');
      if(!checks.length) return;
      checks.forEach(spec => {
        const [grp, item] = spec.split(':');
        if(!grp || !item) return;
        // Find the checkbox matching this label text under the matching group
        $$('#taxonomy details').forEach(d => {
          if(d.querySelector('summary').textContent.trim() === grp.trim()){
            $$('label', d).forEach(lbl => {
              if(lbl.textContent.trim() === item.trim()){
                const cb = lbl.querySelector('input[type="checkbox"]');
                if(cb) cb.checked = true;
              }
            });
          }
        });
      });
    }

    // --- Init ----------------------------------------------------------------
    document.addEventListener('DOMContentLoaded', () => {
      buildTaxonomy($('#taxonomy'));
      $('#when').value = todayISO();
      $('#schema').textContent = JSON.stringify(GAI_TAXONOMY, null, 2);
      $('#btnGen').addEventListener('click', generate);
      $('#btnCopy').addEventListener('click', copyOut);
      $('#btnMD').addEventListener('click', downloadMarkdown);
      $('#btnReset').addEventListener('click', resetAll);
      applyURLChecks();
    });
  </script>
</body>
</html>
